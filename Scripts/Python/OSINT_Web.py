import os
#import platform
import requests
import socket
from bs4 import BeautifulSoup

#Colors
BLUE = "\033[94m"
GREEN = "\033[92m"
RESET = "\033[0m"


def logo():
    ascii_logo = f"""{BLUE}
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣠⣤⣶⣶⣾⣿⣿⣿⣿⣷⣶⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣶⣾⣿⣿⣿⣿⣷⣶⣶⣤⣄⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⢀⣠⡴⠾⠟⠋⠉⠉⠀⠀⠀⠀⠀⠀⠀⠈⠉⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠉⠁⠀⠀⠀⠀⠀⠀⠀⠉⠉⠙⠛⠷⢦⣄⡀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠘⠋⠁⠀⠀⢀⣀⣤⣶⣖⣒⣒⡲⠶⣤⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣤⠶⢖⣒⣒⣲⣶⣤⣀⡀⠀⠀⠈⠙⠂⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⣠⢖⣫⣷⣿⣿⣿⣿⣿⣿⣶⣤⡙⢦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡴⢋⣤⣾⣿⣿⣿⣿⣿⣿⣾⣝⡲⣄⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⣄⣀⣠⢿⣿⣿⣿⣿⣿⣿⣿⡿⠟⠻⢿⣿⣿⣦⣳⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣟⣴⣿⣿⡿⠟⠻⢿⣿⣿⣿⣿⣿⣿⣿⡻⣄⣀⣤⠀⠀⠀
⠀⠀⠀⠈⠟⣿⣿⣿⡿⢻⣿⣿⣿⠃⠀⠀⠀⠀⠙⣿⣿⣿⠓⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠚⣿⣿⣿⠋⠀⠀⠀⠀⠘⣿⣿⣿⡟⢿⣿⣿⣟⠻⠁⠀⠀⠀
⠤⣤⣶⣶⣿⣿⣿⡟⠀⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀⢻⣿⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⣿⡏⠀⠀⠀⠀⠀⠀⣹⣿⣿⣷⠈⢻⣿⣿⣿⣶⣦⣤⠤
⠀⠀⠀⠀⠀⢻⣟⠀⠀⣿⣿⣿⣿⡀⠀⠀⠀⠀⢀⣿⣿⡟⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⢻⣿⣿⡀⠀⠀⠀⠀⢀⣿⣿⣿⣿⠀⠀⣿⡟⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠻⣆⠀⢹⣿⠟⢿⣿⣦⣤⣤⣴⣿⣿⣿⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⣿⡿⢷⣤⣤⣤⣴⣿⣿⣿⣿⡇⠀⣰⠟⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠙⠂⠀⠙⢀⣀⣿⣿⣿⣿⣿⣿⣿⠟⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠻⠁⠀⣻⣿⣿⣿⣿⣿⣿⠏⠀⠘⠃⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡈⠻⠿⣿⣿⣿⡿⠟⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⠻⢿⣿⣿⣿⠿⠛⢁⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠚⠛⣶⣦⣤⣤⣤⡤⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠰⢤⣤⣤⣤⣶⣾⠛⠓⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
{RESET}{GREEN}
\t▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄{GREEN}
\t█{GREEN}[+] Author: firodrigz{RESET}                     {GREEN}█{GREEN}
\t█{GREEN}[+] Follow me on Github: firodrigz{RESET}         {GREEN}█{GREEN}
\t█{GREEN}[+] Version: 1.0{RESET}                         {GREEN}█{GREEN}
\t█{GREEN}[+] Date: 25-01-2024{RESET}                     {GREEN}█{GREEN}
\t▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀
"""
    return print(ascii_logo)

def subdominios(lista, destino):
    total_subdominios = len(lista)
    existente = []

    for elemento in lista:
        subdominio = f"{elemento}.{destino}"  
            
        url = f"http://{subdominio}"
        try:
            respuesta = requests.get(url, timeout=2)
            
            if respuesta.status_code == 200:
                print(f"El subdominio {subdominio} está alcanzable (código de respuesta 200).")
                existente.append(subdominio)


        except requests.RequestException as e:
            pass

    return existente

    #for elemento in lista:
    #    subdominio = f"{elemento}.{destino}"  
            
    #    comando_ping = f"ping -c 4 {subdominio} > /dev/null 2>&1"
    #    resultado = os.system(comando_ping)

    #    if resultado == 0:
    #        print(f"El subdominio {subdominio} existe.")


def encuentra_ip(subdominios_existentes):
    for elemento in subdominios_existentes:
        direccion_ip = socket.gethostbyname(elemento)
        print(f"La dirección IP del subdominio {elemento} es: {direccion_ip}")

def scraping(dominio):
    
    response = requests.get(dominio)
    soup = BeautifulSoup(response.text, 'html.parser')

    # Ejemplo: Extraer todos los enlaces de la página
    links = soup.find_all('a')
    for link in links:
        print(link.get('href'))

def menu():

    while True:
        print(f"{BLUE}Help menu..   press 1 to continue"+ RESET)
        print(f"{BLUE}[+] 1.{RESET} SUBDOMAIN FUZZING")
        print(f"{BLUE}[+] 2.{RESET} SCRAPING")
        print(f"{BLUE}[+] 0.{RESET} EXIT")
        try:
            value = input("> ")
            
            if value == "1":
                mi_lista = ['www', 'biondi3', 'ns1', 'ns2', 'ns3', 'blog', 'mail', 'app']
                dominio_principal = input("[+] Ingrese dominio: ")
                subdominios_existentes = subdominios(mi_lista, dominio_principal)
                if len(mi_lista) > 0:
                    confirm = input("\n[+] Desea continuar y encontrar las IP? Y/n (presione Enter para seleccionar Y): ") or "Y"
                    if confirm.lower() == "y" or confirm.lower() == "yes":
                        encuentra_ip(subdominios_existentes)
                            
            elif value == "2":
                dominio = input("[+] Ingrese dominio: ")
                scraping(dominio)

            elif value == "0":
                break
        
        except e as Error:
            print(e)
        except k as KeyError:
            print(k)

if __name__ == "__main__":
    logo()
    menu()


